@{
    ViewBag.Title = "Sydney";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            background-size: cover;
            background-position: center;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }

        th {
            background-color: rgba(0,0,0,0.5);
        }
    </style>
    
</head>
<body>
    <div class="row">
        <div class="col-md-6">
            <div class="card" style="text-align: center; height: 150px;">
                <div class="card-body">
                    <p>Highest UV index prediction for next 8 days</p>
                    <table>
                        <tr id="uvtableHeaderRow">
                        </tr>
                        <tr id="uvtableBodyRow">
                        </tr>
                    </table>
                </div>
            </div>
            <div class="card" style="text-align: center; height: 200px;">
                <div class="card-body">
                    <p>Max-Min Temperature prediction for next 8 days</p>
                    <table>
                        <tr id="tetableHeaderRow">
                        </tr>
                        <tr id="maxtetableBodyRow">
                        </tr>
                        <tr id="mintetableBodyRow">
                        </tr>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="card" style="text-align: center; height: 250px;">
                        <div class="card-body">
                            <img src="~/imagine/Melbourne.jpg" class="resize-image" style=" height : 220px; width: auto">
                        </div>

                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card" style="text-align: center; height: 250px;">
                        <div class="card-body">
                            avtivites here.
                        </div>

                    </div>

                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card" style="text-align: center; height: 600px;">
                <div class="card-body">
                    <p style="font-weight : bold">Clothing Advice</p>
                    <div id="clothingAdviceContainer">
               
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>

        function getClothingData() {
            var uvData = extractDailyData("apidata_day_real_location", "apidata_uvi_real_location");
            var tempData = extractDailyData("apidata_day_real_location", "apidata_maxte_real_location", "apidata_minte_real_location");

            if (uvData.length === tempData.length) {
                var clothingAdvice = document.getElementById("clothingAdviceContainer");

                for (var i = 0; i < uvData.length; i++) {
                    var date = uvData[i].date;
                    var uvIndex = uvData[i].value;
                    var maxTemp = tempData[i].max;
                    var minTemp = tempData[i].min;

                    // give clothing advice based on UV index and temperature
                    var advice = "Date: " + date + "<br>";
                    advice += "UV Index: " + uvIndex + "<br>";
                    advice += "Max Temperature: " + maxTemp + "°C<br>";
                    advice += "Min Temperature: " + minTemp + "°C<br>";
                    advice += generateClothingAdvice(uvIndex, maxTemp, minTemp);

                    // add advice to the paragraph
                    var paragraph = document.createElement("p");
                    paragraph.innerHTML = advice;

                    // add to site
                    clothingAdvice.appendChild(paragraph);
                }
            } else {
                console.log("Data mismatch between UV and temperature data.");
            }
        }

        function extractDailyData(dayKey, dataKey1, dataKey2 = null) {
            var dayData = sessionStorage.getItem(dayKey);
            var data1 = sessionStorage.getItem(dataKey1);
            var data2 = dataKey2 ? sessionStorage.getItem(dataKey2) : null;

            if (!dayData || !data1) {
                return [];
            }
            var dailyData = [];
            if (dayData && data1) {
                var days = dayData.split(",");
                var values1 = data1.split(",");
                var values2 = data2 ? data2.split(",") : null;

                for (var i = 0; i < days.length; i++) {
                    var date = new Date(days[i] * 1000).toDateString();
                    var value1 = parseFloat(values1[i]);
                    var value2 = data2 ? parseFloat(values2[i]) : null;

                    dailyData.push({ date: date, value: value1, max: value2, min: value2 });
                }
            }
            return dailyData;
        }

        function generateClothingAdvice(uvIndex, maxTemp, minTemp) {
            var advice = "";

            // advice
            if (uvIndex > 7) {
                advice += "UV index is high. Please use sunscreen and wear protective clothing. ";
            }
            if (maxTemp > 30) {
                advice += "It's hot outside. Wear light, breathable clothing. ";
            } else if (maxTemp < 10) {
                advice += "It's cold outside. Wear warm clothing. ";
            }

            return advice;
        }

        function useSessionStorageValue() {
            var time = sessionStorage.getItem("apidata_day_real_location");
            var uvi = sessionStorage.getItem("apidata_uvi_real_location");
            var maxTe = sessionStorage.getItem("apidata_maxte_real_location");
            var minTe = sessionStorage.getItem("apidata_minte_real_location");
            if (time && uvi) {
                var timestamps = time.split(",");
                var uvsplit = uvi.split(",");
                var headerRow = document.getElementById("uvtableHeaderRow");
                var bodyRow = document.getElementById("uvtableBodyRow");
                timestamps.forEach(function (item) {
                    var date = new Date(item * 1000);
                    var dateString = date.toUTCString();
                    var parts = dateString.split(" ");
                    var monthDayString = parts[2] + " " + parts[1];
                    var th = document.createElement("th");
                    th.style.border = "1px solid #ddd";
                    th.style.padding = "8px";
                    th.style.textAlign = "center";
                    th.textContent = monthDayString;
                    headerRow.appendChild(th);
                });
                uvsplit.forEach(function (item) {
                    var td = document.createElement("td");
                    td.style.border = "1px solid #ddd";
                    td.style.padding = "8px";
                    td.style.textAlign = "center";
                    td.textContent = item;
                    bodyRow.appendChild(td);
                });
            } else {
                console.log("No data found in sessionStorage.");
            }
            if (time && maxTe && minTe) {
                var maxTeS = maxTe.split(",");
                var minTeS = minTe.split(",");
                var timestamps = time.split(",");
                var headerRow = document.getElementById("tetableHeaderRow");
                var maxbodyRow = document.getElementById("maxtetableBodyRow");
                var minbodyRow = document.getElementById("mintetableBodyRow");
                timestamps.forEach(function (item) {
                    var date = new Date(item * 1000);
                    var dateString = date.toUTCString();
                    var parts = dateString.split(" ");
                    var monthDayString = parts[2] + " " + parts[1];
                    var th = document.createElement("th");
                    th.style.border = "1px solid #ddd";
                    th.style.padding = "8px";
                    th.style.textAlign = "center";
                    th.textContent = monthDayString;
                    headerRow.appendChild(th);
                });
                maxTeS.forEach(function (item) {
                    var td = document.createElement("td");
                    td.style.border = "1px solid #ddd";
                    td.style.padding = "8px";
                    td.style.textAlign = "center";
                    td.textContent = (item - 273.15).toFixed(1);
                    maxbodyRow.appendChild(td);
                });
                minTeS.forEach(function (item) {
                    var td = document.createElement("td");
                    td.style.border = "1px solid #ddd";
                    td.style.padding = "8px";
                    td.style.textAlign = "center";
                    td.textContent = (item - 273.15).toFixed(1);
                    minbodyRow.appendChild(td);
                });
            } else {
                console.log("No data found in sessionStorage.");
            }
        }

        window.onload = function () {
            useSessionStorageValue();
            getClothingData();
        };
    </script>

</body>

</html>