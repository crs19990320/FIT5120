@{
    ViewBag.Title = "Home Page";
}
@model IEnumerable<MainProject.Models.QuestionTable>

<style>
    .btn-custom {
        margin-left: 120px;
        background-color: blue;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        font-size: 16px;
        text-decoration: none;
    }
</style>

<h1 style="text-align: left; margin-bottom: 20px;">
    <span>&#x1F984;</span> Hi! Alligator Hibiscus
</h1>

<main style="position: relative; width: 80vw; height: 90vh; display: flex;">

    <!-- Cards on the left -->
    <div style="width: 60%; display: flex; flex-direction: column; justify-content: space-between;">
        <h4>This Week's Activities</h4>
        <!-- Top-left card -->
        <section class="card" style="height: 200px; border: solid">
            <p style="font-size:30px ;font-weight:300; text-align: left; margin-bottom: 10px; margin-left:100px">Let's Learn about</p>
            <div style="border: none;">
                <p style="font-size: 30px;font-weight:bold; text-align: left; margin-left: 120px;">Water Waste<img src="https://i.pinimg.com/474x/71/e9/3a/71e93a80c1b1713b41ad2676230a69df.jpg" style="width: 20%; height: auto; float: right; margin-right:70px;" /></p>
                <button onclick="openVideoPopup()" class="btn btn-custom">Watch Video</button>
            </div>
        </section>

        <!-- Bottom-left cards -->
        <div style="display: flex; flex-direction: column; justify-content: space-between; height: 50%;">
            <!-- Bottom-left card 1 -->
            <section class="card" style="height: 200px; border: solid">
                <p style="font-size:30px ;font-weight:300; text-align: left; margin-bottom: 10px; margin-left:100px">Check your knowledge</p>
                <div style="border: none;">
                    <p style="font-size: 30px;font-weight:bold; text-align: left; margin-left: 120px;">Card Game<img src="https://st2.depositphotos.com/1036149/12175/i/450/depositphotos_121752080-stock-photo-crocodile-holding-question-mark-and.jpg" style="width: 20%; height: auto; float: right; margin-right:70px;" /></p>
                    <button id="game" class="btn btn-custom"> Play </button>
                </div>
            </section>

            <!-- Bottom-left card 2 -->
            <h4 style="margin-top: 20px; margin-bottom:20px;">Your Impact</h4>
            <section class="card" style="height: 200px; border: solid">
                <p style="font-size:30px ;font-weight:300; text-align: left; margin-bottom: 10px; margin-left:100px">How have you helped the climate?</p>
                <div style="border: none;">
                    <p style="font-size: 30px;font-weight:bold; text-align: left; margin-left: 120px;">Climate Explorer<img src="https://static.vecteezy.com/system/resources/previews/001/237/406/original/world-kawaii-planet-earth-smiling-vector.jpg" style="width: 20%; height: auto; float: right; margin-right:70px;" /></p>
                    <a href="Map" class="btn btn-custom">Launch</a>
                </div>
            </section>
        </div>
    </div>

    <!-- Card on the right -->
    <section class="card" style="width: 30%; margin-left: auto; margin-top: 80px; border:solid;">
        <h2 style="text-align: left;" id="rightCardTitle">Checklist</h2>
        <div style="border: none;">
            <ul>
                <li style="margin-bottom: 10px; font-size: large"><input type="checkbox" id="task1" name="task1"><label for="task1">Turn off the tap while brushing teeth</label></li>
                <li style="margin-bottom: 10px; font-size: large"><input type="checkbox" id="task2" name="task2"><label for="task2">Task 2</label></li>
                <li style="margin-bottom: 10px; font-size: large"><input type="checkbox" id="task3" name="task3"><label for="task3">Task 3</label></li>
            </ul>
        </div>
    </section>
</main>

<!-- Temporary window -->
<div id="tempWindow" style="display: none; position: absolute; top: 60px; left: 75%; transform: translateX(-50%); background-color: rgba(255, 255, 255, 0.8); padding: 20px; border: 1px solid #ccc;">
    <p id="tempContent">This is a temporary window.</p>
    <button onclick="closeTempWindow()">Close</button>
</div>

<!-- Video popup -->
<div id="videoPopup" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(0, 0, 0, 0.8); padding: 20px; border-radius: 10px;">
    <video id="videoPlayer" controls style="width: 80%; height: auto; margin: 0 auto;">
        <source src="https://videos.pexels.com/video-files/4884642/4884642-hd_1920_1080_30fps.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <button onclick="closeVideoPopup()" style="position: absolute; top: 10px; right: 10px; background-color: transparent; border: none; color: white; font-size: 20px;">Close</button>
</div>

<script>
    // Function to show temporary window with different content based on checkbox id
    function showTempWindow(id) {
        var content = "";

        // Determine content based on checkbox id
        switch (id) {
            case "task1":
                content = "Hurray,In 5 years, you would have preserved 25 wetlands for alligators.";
                break;
            case "task2":
                content = "Content for Task 2.";
                break;
            case "task3":
                content = "Content for Task 3.";
                break;
            default:
                content = "Default content.";
        }

        // Set content and display temporary window
        document.getElementById("tempContent").innerText = content;
        document.getElementById("tempWindow").style.display = "block";
    }

    // Function to close temporary window
    function closeTempWindow() {
        document.getElementById("tempWindow").style.display = "none";
    }

    // Add event listener to each checkbox
    document.querySelectorAll('input[type="checkbox"]').forEach(function (checkbox) {
        checkbox.addEventListener('change', function () {
            if (this.checked) {
                showTempWindow(this.id);
            }
        });
    });
</script>

<script>
    // Function to open the video popup
    function openVideoPopup() {
        document.getElementById("videoPopup").style.display = "block";
        document.getElementById("videoPlayer").play(); // Auto play the video
    }

    // Function to close the video popup
    function closeVideoPopup() {
        document.getElementById("videoPopup").style.display = "none";
        document.getElementById("videoPlayer").pause(); // Pause the video
    }
</script>


<script>
    document.getElementById('game').addEventListener('click', function () {
        var jsonData = @Html.Raw(Json.Encode(Model));

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        shuffle(jsonData);
        var selectedQuestions = jsonData.slice(0, 10);
        var encapsulatedData = {
            questions: selectedQuestions
        };
        sessionStorage.setItem('QuestionJson', JSON.stringify(encapsulatedData));
        console.log("Randomly selected 10 questions:", encapsulatedData);
        window.location.href = '/Home/cardGame';
    });
</script>